# 视觉SLAM系统
激光SLAM系统
- 优点：数据稳定性好；测距精度高；扫描范围广
- 缺点：价格昂贵；数据信息量低；安装部署位置不能有遮挡；雨天、烟雾等环境容易失效

视觉SLAM系统
- 优点：价格便宜、图像数据信息量大，室内和室外都适用；雨天、烟雾场景影响小
- 缺点：视觉传感器数据稳定性和精度交叉；消耗计算资源相对多

<div align="center">
    <image src="./imgs/视觉slam算法.png" width = 600>
    <h4>几种常见的视觉SLAM算法</h>
</div>

>特征点法流程
- 对输入图像进行特征提取（比如 SIFT、SURF、ORB 特征）
- 特征匹配
- 利用前面两步的数据关联信息计算相机运动，也就是前端 VO（Visual Odometry）
- 后端优化
- 全局建图

>直接法流程：
- 前端 VO 直接利用图像灰度信息进行数据关联，同时计算相机运动，节省了很多特征提取的时间
- 后端处理

>半直接法
- 结合上面两种思路，优点是处理速度大大提升

&emsp;
## 1 特征点法
SLAM 代表算法：MonoSLAM、PTAM 和 ORB-SLAM2
>Mono-SLAM
- 首个基于纯单目相机的视觉 SLAM 系统
- 流程：
    - 前端从输入的灰度图像中提取 Shi-Tomasi 角点特征
    - 采用匀速运动模型进行运动预测
    - 将相机状态和路标特征点当成一个整体状态估计量放入后端EKF滤波器，利用观测做更新
- 缺点：
    - 由于采用滤波方法进行求解，智能构建很小规模的地图
    - Shi-Tomasi 角点特征部剧本旋转不变性，故特征稳定性受运动影像较大

>PTAM
- 首个采用优化方法求解的视觉 SLAM 系统
- 流程：
    - 纯单目相机输入作为传感器
    - 前端从图像中提取 FAST 特征
    - 用相邻两帧间已匹配特征点对构建重投影误差函数求解
    - 后端优化得到地图
- 创新点：
    - 将前端和后端在代码中用双线程来实现
        - 将前端特征提取、匹配、VO这些和定位相关的放一个线程
        - 将后端全局优化和局部优化这些和建图相关的放在一个线程
        - 这样较慢的后端线程就不会拖累运行较快的前端线程，以保证前端定位的实时性
    - 引入了关键帧机制
        - 关键帧：具有代表性的图像
        - 关键帧机制：整个算法在运行中维护一个由一系列关键帧组成的关键帧序列，前端在定位丢失时可以借助关键帧信息快速重定位，后端在关键帧序列上进行全局优化和局部优化，避免了冗余输入帧纳入优化过程，造成计算资源浪费

>ORB
- 可以说是迄今效果最好的视觉SLAM系统
- 三代：
    - ORB-SLAM：只支持单目相机，存在尺度不确定性问题
    - ORB-SLAM2：支持了单目、双目和 RGB-D，借鉴了PTAM双线程的思想，并增加了一个线程用于闭环检测，即前端、后端、闭环3个线程。
    - ORB-SLAM3：加入了 IMU 融合
- 流程：
    - 前端提取ORB特征，VO求解
    - 后端进行局部优化建图
    - 闭环检测成功后触发全局优化。全局优化过程在相机位姿图上进行，而不考虑地图特征点，这大大加快了优化速度

&emsp;
## 2 直接法
SLAM 代表算法：DTAM、LSD-SLAM、DSO

>DTAM
- 采用单目直接法构建稠密地图
- 流程：
    - 前端利用图像像素构建代价函数求解 VO，并利用逆深度（深度值的导数）描述每个像素的深度
    - 后端全局优化给每个像素恢复深度图，这样就构建出了 3D 稠密地图
- 缺点：为每个像素都恢复稠密深度非常耗费计算资源，因此这个算法也只能在 GPU 加速下才能跑得动

>LSD-SLAM
- 构建出来的是半稠密地图
- 流程：
    - 前端直接利用当前图像和当前关键帧之间的像素构建代价函数求解 VO
    - 后端在每个关键帧中按梯度大小抽取部分像素，并用深度滤波器恢复其深度值，这样就构建出了3D半稠密地图
    - 系统闭环检测成功后除法在相机位姿图上进行的全局优化

>DSO
- 与LSD-SLAM相比，地图更为系数
- 流程：
    - 前端直接法求解VO
    - 后端将关键帧中梯度比较突出的像素抽出来用于深度恢复
    - 算法整个优化是在光度标定模型、相机内参数、相机外参和逆深度上进行的，精度会更高

&emsp;
## 3 半直接法
>SVO
- 结合了特征点法的特征提取与匹配的鲁棒性有事及直接法计算快速性优势，因此具有更跨苏、更稳定的性能
- 缺点：开源出来的 SVO 是经过裁剪后的版本，并没有后端优化和闭环检测环节，只是一个 VO。



&emsp;
## 4 总结
特征点法与直接法的区别就在于数据关联，特征点法的数据关联是由特征提取和特征匹配这两个过程来完成，而直接法则是一步到位，直接在图像像素上完成数据关联。
