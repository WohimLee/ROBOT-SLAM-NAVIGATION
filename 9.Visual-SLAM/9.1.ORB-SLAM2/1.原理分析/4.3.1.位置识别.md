&emsp;
# 位置识别
## 1 为什么要用到位置识别
- `重定位`：如果 SLAM 建图过程中追踪线程突然跟丢了，就要启动重定位尽快找回跟丢的位置信息
- `闭环检测`：或者 SLAM 在构建了一个很大的地图后，要判断当前路过的位置是否之前已经来过

&emsp;
## 2 图像的位置识别方法
基于图像的位置识别方法，主要有以下3种：
- `图像到图像匹配（Image-to-Image matching）`：将地图看成由一系列图像组成的序列，那么用当前观测图像与地图中的每幅图像匹配，就是图像到图像匹配（2D-2D）
- `图像到地图的匹配（Image-to-map matching）`：将地图看成一系列地图点组成的点云，那么用当前观测图像与地图点云匹配，就是图像到地图匹配（3D-2D）
- `地图到地图的匹配（Map-to-map matching）`：如果用当前几帧图像构建出来的局部小地图与全局大地图匹配，就是地图到地图的匹配


图像到图像匹配（Image-to-Image matching），在大环境下比地图到地图（Map-to-map matching）或图像到地图（Image-to-map matching）的方法的尺度特性更好。

而为了提到图像到图像的匹配效率，通常会用到 `词袋模型（Bag-of-Words, BoW）`。

&emsp;
## 3 词袋模型
词袋模型最早用于自然语言处理（Natural Language Processing, NLP）和信息检索领域，比如：
- 微信收录了很多公众号文章，你输入一些关键词查询出你想看的文章
- 写毕业论文的时候，查询是否有文章雷同

>例子
- 假如现在两句话
    ```
    Doc1: I like programming, you like too.
    Doc2: I alson like robots.
    ```
    在词袋模型中，把 Doc1 和 Doc2 的单词提取出来，并给每个单词一个编号，就构成了一个词典：
    ```python
    {
        1: "I",
        2: "like",
        3: "programming",
        4: "you",
        5: "too",
        6: "also",
        7: "robots"
    }
    ```
    按照单词在句子中出现的次数我们可以将两个句子表示为一个 7 维向量（表征向量）：
    ```python
    Doc1: v1=[1,2,1,1,1,0,0]
    Doc2: v2=[1,1,0,0,0,1,1]
    ```

    利用这两个向量 $\pmb{v}_1$ 和 $\pmb{v}_2$ 的相似性，就可以判断两篇文章的相似度。

&emsp;
## 4 视觉词袋模型
借鉴词袋模型的思想，把图像中的特征点看成单词，一幅图像就是由许多单词组成的文章，多张图像就构成了一个由多篇文章组成的语料库。也就是说可以将词袋模型应用于计算机视觉领域，即视觉词袋模型。

从图像中可以提取出多种特征点（比如 SIFT、SURF、ORB等），每种特征点都对应一种视觉词袋模型。由于 ORB 是具有旋转和尺度不变性的二进制特征，并且提取速度特别快，ORB-SLAM 选了这种特征用于整个系统的图像处理

具体实现库：DBoW2



